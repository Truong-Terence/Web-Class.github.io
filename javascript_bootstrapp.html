<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="styles/css/style.css">
    <link rel="icon" type="image/png" sizes="16x16" href="./img/stack.png">
    <title>Document</title>
</head>
<body>
    <!--
        TODO: Maquette:
        Photoshop
        concept
        fonctionnement
        traduire
        dimmensions
        elements traduisibles
        recr√©er en HTML
        metatags
        grille bootstrap
        organisation cSS
        int√©grer CSS
        int√©grer une maquette en HTML CSS

        TODO:Photoshop:

    -->
    <nav>
        <div id="search_container">
            <form action="/action_page.php">
            <input type="text" placeholder="Search.." name="search">
            <div class="search"><img src="img/search.png" alt="image_search_bar"></div>
            </form>
        </div>
        <h2><a href="index.html">Menu</a></h2>
        <div id="menu_line">
            <ul>
                <li><a class="nav_unavailable" href="">D√©couverte m√©tier</a></li>
                <li><a href="html_css.html">HTML, CSS : kecec√© ?</a></li>
                <li><a class="nav_unavailable" href="">Transformer une maquette en site Web</a></li>
                <li><a href="animations_css.html">animations CSS</a></li>
                <li><a class="nav_unavailable" href="">Optimisation site web</a></li>
                <li><a href="javascript_bootstrapp.html">Javascript & bootstrapp</a></li>
                <li><a class="nav_unavailable" href="">Les API</a></li>
                <li><a class="nav_unavailable" href="">Bases de donn√©es</a></li>
                <li><a class="nav_unavailable" href="">Projets de cours</a></li>
                <li><a class="nav_unavailable" href="">Projets externes</a></li>
                <li><a class="nav_unavailable" href="">piste poursuite d'√©tudes</a></li>
            </ul>
         </div>
    </nav>
    <div id="main">
        <div class="sticky"><div id="hide">
            <div class="trait"></div>
            <div class="trait"></div>
            <div class="trait"></div>
        </div></div>
        <div id="smaller_main">
            <header id="header">
                <div id="separation_border">
                <a href="index.html" class="logo"><p></p><strong>WebMastered </strong>by Vittaz & T√©t√©</p></a>
                    <ul class="icons">
                        <li><a href="https://openclassrooms.com/" target="blank"><img src="img/locr.png" alt="image_banniere"id="headerimg"/></a></li>
                        <li><a href="https://facebook.com/"target="blank"><img src="img/lfb.png" alt="image_banniere"id="headerimg"/></a></li>
                        <li><a href="https://twitter.com/" target="blank"><img src="img/ltwitter.png" alt="image_banniere"id="headerimg" /></a></li>
                        <li><a href="https://github.com/"target="blank"><img src="img/lgit.png" alt="image_banniere"id="headerimg" /></a></li>
                    </ul>
                </div>
            </header>
    <h2>Le JavaScript</h2>
        <p> /!\ camelCase : unExempleDeCamelCase /!\ 
            <ul>
                <li>let : d√©claration de variables</li>
                <li>const : d√©claration de constante</li>
                <li>number : type pour entiers, d√©cimals, n√©gatifs. /!\ Les virgules sont √† √©viter pour les calculs (mieux vaut des centimes que des euros) /!\</li>
                <li>boolean : type ayant pour valeur true or false</li>
                <li>string : type pour texte. seul le + correspondant √† la concat√©nation fonctionne. " " : espace</li>
                <li>types de donn√©es primitives JS : null, undefined, symbol.</li>
                <li>classes (objet) : fontionne comme une variable mais sa valeur est entre {}. Dans les {} on ins√®re "cl√©1: valeur1, cl√©2: valeur2, etc...". Pour acc√©der √† ces valeurs on tape "class.key". <br>
                Pour cr√©er une classe on utilise <br>
                <div class="pre_code">javascript</div>
                <div class="code code__js">
                <span class="code__line">1</span><span class="code__js--class">class</span> NomClasse { <br>
                <span class="code__line">2</span>constructor(arg1, arg2, arg3){ <br>
                <span class="code__line">3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code__js--mot_cle">this</span>.arg1 = arg1; <br>
                <span class="code__line">4</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code__js--mot_cle">this</span>.arg2 = arg2; <br>
                <span class="code__line">5</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code__js--mot_cle">this</span>.arg3 = arg3; } <br>
                <span class="code__line">6</span>} <br>
                </div>
                    Pour cr√©er une instance on utilise "new" : <br>
                    <div class="code_section">let nomInstance = new NomClasse("arg1, arg2, arg3) ;</div></li>
                <li>array (tableaux): fonctionne comme une variable avec sa valeur entre []. Dans les [ on ins√®re "value1, value2, value3, value4, etc..."];. Un array est une liste ordonn√©e donc chaque valeur a son index, allant de 0 √† x. <br>
                Pour appeler une valeur on tape nomArray[index]. D√©clarable en tant que constante. <br>
                On peut placer des variables dans un array. </li>            
            </ul>
            Les types primitifs (nombres, string, booleens) sont pass√©s par valeurs : Si apr√®s d√©finition d'une variable et insertion de cette variable dans un objet/tableau, on choisis de modifier la variable, la valeur ne sera pas mise √† jour car elle ne garde pas de relation avec la variable mais avec la valeur.
            A l'inverse si on met √† jour l'objet ou le tableau, la variable cr√©e le prendra en compte car elle est li√©e √† la r√©f√©rence de cet objet. <br>
            Manipuler un tableau : nomArray.length; , nomArray.push("string"); - pour ajouter √† la fin, nomArray.unshift("string"); - pour ajouter au d√©but, nomArray.pop(); - pour supprimer le dernier. <br>
            Un "set" ou ensemble, est une liste non ordonn√©e. Les "map" sont comme un array, fonctionnent sur le principe d'une liste ordonn√©e avec cl√©-valeur √† la diff√©rence qu'elles ne se limitent pas aux strings et peuvent √™tre manipul√©es.
            
        </p>
        <br>
    <h2>Le JavaScript pour le web</h2>
        <div class="under"><h3>Le DOM</h3></div>
            <p>
            Le DOM corresponds √† l'arbre de notre fichier comme suit : <br>
            <img src="./img/DOM1.jpg" alt="DOM"> <br>
            Dans notre DOM, en associant une constante, on va pouvoir rechercher des √©l√©ments en acc√©dant √† la racine du DOM. On utilisera la variable <strong>document</strong> qui correspond √† l'√©lement &lthtml&gt. <br>
            if (document.body.nodeType === document.ELEMENT_NODE) { <br>
                console.log("Body est un noeud √©l√©ment"); <br>
            } else { // (soit document.TEXT_NODE))<br>
                console.log("Body est un noeud textuel"); <br>
            } <br>
            document.body.childNodes[0] donne acc√®s au premier enfant du noeud body.<br> Les espaces entre les balises ainsi que les retours √† la ligne dans le code HTML sont consid√©r√©s par le navigateur comme des n≈ìuds textuels.
                <ul>
                    <li>Par <strong>id</strong> avec document.getElementById(""), c'est une m√©thode pr√©cise car il n'existe qu'un √©l√©ment par id</li>
                    <li>Par <strong>class</strong> avec document.getElementsByClassName("") qui nous sortira une liste des √©l√©ments de la classe, on peut ajuster la recherche √† l'aide d'index</li>
                    <li>Par <strong>tag</strong> avec document.getElementsByTagName(""). On obitendra une liste √©galement</li>
                    <li>Par <strong>s√©lecteur</strong> avec document.querySelector("") - document.querySelectorAll("") qui fonctionne de mani√®re plus complexe, par exemple : <em>document.querySelector("#myId p.article > a")</em> ira chercher dans l'√©l√©ment ayant pour id  #myId , les √©l√©ments de type &ltp&gt qui ont pour classe  article,
                         afin de r√©cup√©rer le lien &lta&gt qui est un enfant direct (pas des enfants de ses enfants). Il renverra le 1er r√©sultat ou <em>null</em> si aucun √©l√©ment n'est trouv√©</li>
                </ul>
            On peut aussi parcourir des enfants et parents d'√©lements :
                <ul>
                    <li>Pour <strong>children</strong> : element.children nous retourne la liste des enfants de cet √©l√©ment</li>
                    <li>Pour <strong>parents</strong> : element.parentElement retourne l'√©l√©ment parent de celui-ci</li>
                    <li>Pour ce qui l'<strong>entoure</strong> : element.nextElementSibling / element.previousElementSibling permet de naviguer vers l'√©l√©ment suivant / pr√©c√©dent de m√™me niveau</li>
                </ul>
            On pourra par la suite s√©lectionner avec pr√©cision : <br>
            var titresElts = document.getElementsByTagName("h2"); // Tous les titres h2 <br>
            console.log(titresElts[0]); // Affiche le premier titre h2 <br>
            console.log(titresElts.length); // Affiche 3 <br> <br>
            On peut afficher une liste d'√©l√©ments : <br>
            // Tous les √©l√©ments ayant la classe "merveilles" <br>
            var merveillesElts = document.getElementsByClassName("merveilles"); <br>
            for (var i = 0; i < merveillesElts.length; i++) { <br>
                console.log(merveillesElts[i]); <br> <br>
}
            // Affiche les noeuds enfant du noeud body <br>
            for (var i = 0; i < document.body.childNodes.length; i++) { <br>
                console.log(document.body.childNodes[i]); <br>
            } <br>
            var h1 = document.body.childNodes[1]; <br>
            console.log(h1.parentNode); // Affiche le noeud body <br> <br>
            console.log(document.parentNode); // Affiche null : document n'a aucun noeud parent <br>
            Il existe d'autres <a href="https://developer.mozilla.org/fr/docs/Web/API/Node">propri√©t√©s</a> pour naviguer entre les objets du DOM. <br>
            Le nom de la variabletitresEltsstockant la liste des titres se termine parElts, abr√©viation de "√©l√©ments". Cela permet d'indiquer que le contenu de cette variable correspond √† des √©l√©ments du DOM, et non √† de simples valeurs. Il s'agit d'une bonne pratique que nous allons adopter pour toute la suite de ce cours. Une variable stockant un seul √©l√©ment du DOM sera suffix√©e parElt, abr√©viation de "√©l√©ment".
            </p>
        <hr>
        <div class="under"><h3>Modifier le DOM</h3></div>
            <h4>Modifier le contenu d'un √©l√©ment</h4>
                <p>
                D√©finir une valeur √† <em>innerHTML</em> ou <em>textContent</em> remplace directement le contenu actuel de l'√©l√©ment par celui que vous pr√©cisez. <br>
                // Modification du contenu HTML de la liste : ajout d'un langage <br>
                document.getElementById("langages").innerHTML += '&ltli id="c"&gtC&lt/li&gt'; <br>
                Il est souvent utilis√© pour "vider" un √©l√©ment de son contenu : document.getElementById("langages").innerHTML = "";
                </p>
            <h4>Modifier les classes</h4>
                <p>
                La propri√©t√© <strong>classList</strong> permet d'acc√©der direcement √† la liste des classes d'un √©l√©ment et permet les fonctions suivantes :
                    <ul>
                        <li>add(&ltstring&gt, [&ltstring&gt, ...] ) : ajoute la ou les classes sp√©cifi√©es</li>
                        <li>remove(&ltstring&gt, [&ltstring&gt, ...] ) : supprime la ou les classes sp√©cifi√©es</li>
                        <li>contains(&ltstring&gt ) : v√©rifie si la classe sp√©cifi√©e est contenue par cet √©l√©ment</li>
                        <li>replace(&ltold&gt, &ltnew&gt ) : remplace l'ancienne classe par la nouvelle classe</li>
                    </ul>
                </p>
            <h4>Changer les styles d'un √©l√©ment</h4>
                <p>
                elt.style.color = "#fff" change la couleur du texte de l'√©l√©ment √† blanche.
                elt.style.backgroundColor = "#000" change la couleur de fond de l'√©l√©ment en noir.
                elt.style.fontWeight = "bold" met le texte de l'√©l√©ment en gras.
                </p>
           <h4>Modifier les attributs</h4>
                <p>
                Voici quelques exemples avec  elt  faisant r√©f√©rence √† un √©l√©ment de type  input  :
                    <ul>
                        <li>elt.setAttribute("type", "password") change le type de l'input en un type password</li>
                        <li>elt.setAttribute("name", "my-password") change le nom de l'input en my-password</li>
                        <li>elt.getAttribute("name") retourne my-password</li>
                    </ul>
                    // D√©finition de l'attribut "id" du premier titre <br>
                    document.querySelector("h1").setAttribute("id", "titre"); <br>
                    document.querySelector("h1").id = "titre"; <br> <br>
                    On peut utiliser les fonctions getAttribute et removeAttribute. <br>
                    // L'identifiant de la premi√®re liste <br>
                    console.log(document.querySelector("ul").id); <br> <br>
                    // L'attribut href du premier lien <br>
                    console.log(document.querySelector("a").href); <br>
                </p>
            <h4>Cr√©er de nouveaux √©l√©ments</h4>
                <p>
                <strong>document.createElement(&lttag&gt)</strong> prend en param√®tre le nom de la balise de notre √©l√©ment et nous renvoie l'√©l√©ment nouvellement cr√©√©. <br>
                Exemple : const newElt = document.createElement("div"). <br>
                Un √©l√©ment cr√©√© avec cette fonction ne fait pas encore partie du document, vous ne le verrez donc pas sur votre page. Pour le voir, il va d'abord falloir l'ajouter en tant qu'enfant √† un √©l√©ment.
                </p>
            <h4>Ajouter des enfants</h4>
                <p>
                parentNode.appendChild(&ltelement&gt) prend en param√®tre l'√©l√©ment √† ajouter en tant qu'enfant. L'√©l√©ment depuis lequel on appelle cette fonction devient donc le parent de notre √©l√©ment. <br>
                Exemple : <br>            
                const newElt = document.createElement("div"); <br>
                let elt = document.getElementById("main"); <br>            
                elt.appendChild(newElt); <br> <br>
                var pythonElt = document.createElement("li"); // Cr√©ation d'un √©l√©ment li <br>
                pythonElt.id = "python"; // D√©finition de son identifiant <br>
                pythonElt.textContent = "Python"; // D√©finition de son contenu textuel <br>
                document.getElementById("langages").appendChild(pythonElt); // Insertion du nouvel √©l√©ment <br>
                Dans l'exemple pr√©c√©dent, nous avons d√©fini le contenu textuel du nouvel √©l√©ment √† l'aide de la propri√©t√©textContent. Il est possible d'aboutir au m√™me r√©sultat en ajoutant au nouvel √©l√©ment un noeud 
                fils de type texte. Pour cela, on utilise la m√©thodecreateTextNodequi, comme son nom l'indique, cr√©e un nouveau noeud de type texte. Ensuite, on ajoute le noeud texte √† l'√©l√©ment avecappendChild. <br>
                var rubyElt = document.createElement("li"); // Cr√©ation d'un √©l√©ment li <br>
                rubyElt.id = "ruby"; // D√©finition de son identifiant <br>
                rubyElt.appendChild(document.createTextNode("Ruby")); // D√©finition de son contenu textuel <br>
                document.getElementById("langages").appendChild(rubyElt); // Insertion du nouvel √©l√©ment <br>
                </p>
            <h4>Ajout d'un noeud avant un noeud</h4>
                <p>
                var perlElt = document.createElement("li"); // Cr√©ation d'un √©l√©ment li <br>
                perlElt.id = "perl"; // D√©finition de son identifiant <br>
                perlElt.textContent = "Perl"; // D√©finition de son contenu textuel <br>
                // Ajout du nouvel √©l√©ment avant l'identifiant identifi√© par "php" <br>
                document.getElementById("langages").insertBefore(perlElt, document.getElementById("php")); <br> <br>
                // Ajout d'un √©l√©ment au tout d√©but de la liste <br>
                document.getElementById('langages').insertAdjacentHTML("afterBegin",  <br>
                    '&ltli id="javascript"&gtJavaScript&lt/li&gt'); <br>
                </p>
            <h4>Choix de la position exacte du nouveau noeud</h4>
                <p>
                    <ul>
                        <li><strong>beforebegin</strong> : avant l'√©l√©ment existant lui-m√™me</li>
                        <li><strong>afterbegin</strong> : juste √† l'int√©rieur de l'√©l√©ment existant, avant son premier enfant</li>
                        <li><strong>beforeend</strong> : juste √† l'int√©rieur de l'√©l√©ment existant, apr√®s son dernier enfant</li>
                        <li><strong>afterend</strong> : apr√®s l'√©l√©ment existant lui-m√™me</li>
                    </ul>
                </p>
            <h4>Supprimer et remplacer des √©l√©ments</h4>
                <p>
                elt.removeChild(newElt) supprime l'√©l√©ment newElt de l'√©l√©ment elt. <br>
                elt.replaceChild(document.createElement("article"), newElt) remplace l'√©l√©ment newElt par un nouvel √©l√©ment de type article.
                </p>
            <h4>Trouver des √©l√©ments</h4>
                <p>
                    if (document.getElementById("antiques").classList.contains("merveille")) { <br>
                        console.log("L'√©l√©ment identifi√© par antiques poss√®de la classe merveille"); <br>
                    } else { <br>
                        console.log("L'√©l√©ment identifi√© par antiques ne poss√®de pas la classe merveille"); <br>
                    } <br>
                    <a href="https://developer.mozilla.org/fr/docs/Web/API/Element"></a>
                </p>
            <h4>Modifier le style d'un √©l√©ment</h4>
                <p>
                Certaines propri√©t√©s CSS s'√©crivent sous la forme d'un nom compos√©. Pour utiliser ces propri√©t√©s en JavaScript, il faut supprimer le tiret et √©crire la premi√®re lettre du mot suivant en majuscule.
                </p>
                <h5>La propri√©t√© style</h5>
                    <p>
                    Les √©l√©ments du DOM disposent d'une propri√©t√© nomm√©e style qui renvoie un objet repr√©sentant l'attribut  style de l'√©l√©ment. Les propri√©t√©s de cet objet correspondent aux propri√©t√©s CSS de l'√©l√©ment.  <br>
                    var pElt = document.querySelector("p"); <br>
                    pElt.style.color = "red"; <br>
                    pElt.style.margin = "50px"; <br>
                    Un style d√©finit dans la feuille css n'est pas r√©cup√©rable en JavaScript via la propri√©t√© style.
                    </p>
                <h5>La fonction getComputedStyle</h5>
                    <p>
                    Elle prend en param√®tre un noeud du DOM et renvoie un objet repr√©sentant son style. On peut ensuite consulter les diff√©rentes propri√©t√©s CSS de cet objet.
                    </p>
        <hr>
        <div class="under"><h3>Les formulaires</h3></div>
            <h4>Gestion de focus</h4>
                <p>
                // Affichage d'un message contextuel pour la saisie du pseudo <br>
                pseudoElt.addEventListener("focus", function () {<br>
                    document.getElementById("aidePseudo").textContent = "Entrez votre pseudo"; <br>
                }); <br>
                // Suppression du message contextuel pour la saisie du pseudo <br>
                pseudoElt.addEventListener("blur", function (e) { <br>
                    document.getElementById("aidePseudo").textContent = "";<br>
                });                <br>
                Depuis le code JavaScript, on peut modifier la cible de saisie en appelant les m√©thodesfocus(pour donner le focus) etblur(pour l'enlever) sur un √©l√©ment du DOM. <br>
                // Focus sur la zone de saisie du pseudo <br>
                pseudoElt.focus(); <br>
                </p>
            <h4>Les √©l√©ments d'options</h4>
                <p>
                
                </p>
        <hr>
        <div class="under"><h3>Ecouter les √©v√®nements</h3></div>
            <p>
            Element est la classe de base la plus g√©n√©rale √† partir de laquelle tous les objets d'un Document h√©ritent. <br>
            Les programmes JavaScript que nous avons √©crits jusqu'ici s'ex√©cutaient automatiquement d√®s leur chargement par la page web. L'ordre d'ex√©cution des instructions √©tait d√©termin√© √† l'avance et les interactions avec l'utilisateur se limitaient √† la saisie de valeurs au moyen de l'instruction <strong>prompt</strong>.
            </p>
            <dl>
                <dt><strong>Ev√®nement</strong></dt><dd>Un √©v√©nement est une r√©action √† une action √©mise par l'utilisateur, comme le clic sur un bouton ou la saisie d'un texte dans un formulaire. <br>
                En JavaScript, il est repr√©sent√© par un nom ( click ,  mousemove ...) et une fonction que l'on nomme une  <strong>callback</strong> . Un √©v√©nement est par d√©faut propag√©, c'est-√†-dire que si nous n'indiquons pas √† l'√©v√©nement que nous le traitons, il sera transmis √† l'√©l√©ment parent, et ainsi de suite jusqu'√† l'√©l√©ment racine</dd>
            </dl>
            <h4>R√©agir lors d'un clic</h4>
                <p>
                La fonction addEventListener() permet d'√©couter tous types d'√©v√©nements. <br>
                addEventListener(&ltevent&gt, &ltcallback&gt) prend en param√®tres le nom de l'√©v√©nement √† √©couter et la fonction √† appeler d√®s que l'√©v√©nement est ex√©cut√©. <br>
                On pourra se r√©f√©rer √† la <a href="https://developer.mozilla.org/fr/docs/Web/Events" target="blank">liste des √©v√®nements</a>. <br>
                // Ajout d'un gestionnaire qui affiche le type et la cible de l'√©v√©nement <br>
                document.getElementById("bouton").addEventListener("click", function (e) { <br>
                    console.log("Ev√®nement : " + e.type +  <br>
                        ", texte de la cible : " + e.target.textContent); <br>
                }); <br>
                <dl>
                    <dt><strong>addEventListener()</strong></dt><dd>const elt = document.getElementById('mon-lien');.....On r√©cup√®re l'√©l√©ment sur lequel on veut d√©tecter le clic <br>
                        elt.addEventListener('click', function() {.....................On √©coute l'√©v√©nement click <br>
                        elt.innerHTML = "C'est cliqu√© !";................................On change le contenu de notre √©l√©ment pour afficher "C'est cliqu√© !" <br>
                        });</dd>
                    <dt><strong>preventDefault()</strong></dt><dd>Si il s'agit d'un lien, et d√®s que l'on clique sur un lien, le navigateur nous redirige sur la page vers laquelle il pointe, c'est le comportement par d√©fault. <br> <br>
                        const elt = document.getElementById('mon-lien');......R√©cup√©ration de l'√©l√©ment sur lequel on veut d√©tecter le clic <br>
                        elt.addEventListener('click', function(event) {.............Ecoute de l'√©v√©nement click, notre callback prend un param√®tre que nous avons appel√© event ici <br>
                        event.preventDefault();.................................................La fonction preventDefault emp√™che le comportement par d√©faut lors du clic<br>
                        });</dd>
               
                    <dt><strong>stopPropagation()</strong></dt><dd>Fonction de l'objet que votre fonction re√ßoit en param√®tre. Son r√¥le est par contre tr√®s diff√©rent, car il nous permet d'emp√™cher la propagation de l'√©v√©nement vers son parent. <br>
                        Admettons par exemple que nous ayons un √©l√©ment pour lequel nous voulons afficher un message lorsque l'on clique dessus. Mais √† l'int√©rieur de cet √©l√©ment, nous avons aussi un autre √©l√©ment qui doit nous afficher un autre message lorsque l'on clique dessus.

                        Par d√©faut, si nous cliquons dans l'√©l√©ment int√©rieur, le message va s'afficher, puis notre √©l√©ment parent va lui aussi recevoir l'√©v√©nement du clic et encore changer le message. Pour √©viter cela, nous devons stopper la propagation de l'√©v√©nement. <br> <br>
                        elementInterieur.addEventListener('click', function(event) { <br>
                        event.stopPropagation(); <br>
                        elementAvecMessage.innerHTML = "Message de l'√©l√©ment int√©rieur"; <br>
                        });</dd>
                </dl>
                </p>
            <h4>R√©agir au clavier</h4>
                <p>
                // Gestion de l'appui sur une touche du clavier produisant un caract√®re <br>
                document.addEventListener("keypress", function (e) { <br>
                    console.log("Vous avez appuy√© sur la touche " + String.fromCharCode(e.charCode)); <br>
                }); <br>
                Pour g√©rer l'appui et le rel√¢chement sur n'importe quelle touche du clavier (pas seulement celles qui produisent des caract√®res), on utilise les √©v√©nements <strong>keydown</strong> et <strong>keyup</strong>.
                </p>
            <h4>Fin du chargement de la page web</h4>
                <p>
                    // Gestion de la fin du chargement de la page web <br>
                    window.addEventListener("load", function () { <br>
                        console.log("Page enti√®rement charg√©e"); <br>
                    }); <br>
                </p>
            <h4>Fermeture de la page web</h4>
                <p>
                // Gestion de la fermeture de la page web <br>
                window.addEventListener("beforeunload", function (e) { <br>
                    var message = "On est bien ici !"; <br>
                    e.returnValue = message; // Provoque une demande de confirmation (standard) <br>
                    return message; // Provoque une demande de confirmation (certains navigateurs) <br>
                }); <br>
                </p>
        <hr>
        <div class="under"><h3>R√©cup√©rer des donn√©es utilisateur</h3></div>
            <p>En plus de ces deux derni√®res propri√©t√©s, on peut retrouver <a href="https://developer.mozilla.org/fr/docs/Web/API/Event">ici</a> ce que propose l'interface <strong>event</strong>.</p>
            <h4>D√©tecter les mouvements de souris</h4>
                <p>
                En √©coutant l'event <strong>mousemove</strong>, on obtient l'objet de type <strong>MouseEvent</strong> qui contient :
                    <ul>
                        <li>clientX  /  clientY  : position de la souris dans les coordonn√©es locales (contenu du DOM)</li>
                        <li>offsetX  /  offsetY  : position de la souris par rapport √† l'√©l√©ment sur lequel on √©coute l'√©v√©nement</li>
                        <li>pageX  /  pageY  : position de la souris par rapport au document entier</li>
                        <li>screenX  /  screenY  : position de la souris par rapport √† la fen√™tre du navigateur</li>
                        <li>movementX  /  movementY  : position de la souris par rapport √† la position de la souris lors du dernier √©v√©nement  mousemove</li>
                    </ul>
                    <dl>
                        <dt>elt.addEventListener('mousemove', function(event) {</dt>
                            <dd>const x = event.offsetX; // Coordonn√©e X de la souris dans l'√©l√©ment <br>
                            const y = event.offsetY; // Coordonn√©e Y de la souris dans l'√©l√©ment <br>
                            });</dd>
                    </dl>
                </p>
            <h4>Lire le contenu d'un champ de texte</h4>
                <p>
                    <dl><strong>change</strong> :
                        <dt>const selectElement = document.querySelector('.ice-cream'); <br>
                            selectElement.addEventListener('change', (event) => { <br>
                            const result = document.querySelector('.result'); <br>
                            result.textContent = `You like ${event.target.value}`; <br>
                            });</dd> <br>
                        <strong>input</strong> :
                        <dt>input.addEventListener('input', function(event) {</dt>
                        <dd>output.innerHTML = event.target.value; <br>
                        });</dd>
                    </dl>
                </p>
        <hr>
        <div class="under"><h3>Un service web</h3></div>
            <p>
            Chaque <strong>requ√™te</strong> requiert un <strong>langage</strong> et un <strong>protocole de communication</strong> diff√©rent. <br>
                <dl>
                    <dt><strong>SMTP</strong> - Simple Mail Transfer Protocol</dt><dd>Protocole pour l'envoi de mail</dd>
                    <dt><strong>IMAP</strong> - Internet Message Access Protocol</dt><dd>Protocole pour la r√©ception de mail</dd>
                    <dt><strong>HTTP</strong> - HyperText Transfer Protocol</dt><dd>Protocole li√© √† des ressources web. Il permet de charger les pages HTML, CSS, polices, images, ... Il permet √©galement d'envoyer/r√©cup√©rer des formulaires et des donn√©es. </dd>
                    <dt><strong>FTP</strong> - File Transfer Protocol</dt><dd>Protocole li√© aux transferts de fichiers</dd>
                </dl>
            </p>
            <h4>Les codes HTTP</h4>
                <p>
                Si le service web ne comprend pas la requ√™te, il peut renvoyer √† un <a href="https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP">code</a> :
                    <ul>
                        <li>Les codes de 100 √† 199 sont des codes d'information, plut√¥t techniques et peu utilis√©s en pratique</li>
                        <li>Les codes de 200 √† 299 sont des codes de succ√®s. Ils veulent dire que votre requ√™te s'est bien d√©roul√©e et vous apporteront une information sur le type de r√©sultat que vous recevez</li>
                        <li>Les codes de 300 √† 399 sont les codes de redirection. Ils indiquent g√©n√©ralement que le contenu que vous recherchez a boug√© ou n'est pas accessible directement</li>
                        <li>Les codes de 400 √† 499 sont des codes d'erreur li√©s √† l'utilisation du service web (ressource inexistante, authentification requise, pas les bonnes permissions, requ√™te mal construite, etc). Ce sont des erreurs que l'on retrouve fr√©quemment dans la pratique et pour lesquelles il est bon d'avoir une strat√©gie de r√©solution</li>
                        <li>Les codes de 500 √† 599 sont des codes d'erreur venant du service web (plantage du service, service ne r√©pondant plus, manque de m√©moire, etc.). En tant qu'utilisateur du service, vous ne pouvez pas y faire grand-chose, mais de la m√™me mani√®re que pour les erreurs 4xx, il est bon d'avoir une strat√©gie de r√©solution</li>
                    </ul>
                    <ul>Les principaux codes sont :
                        <li>200 : indique que tout s'est bien pass√©</li>
                        <li>201 : indique que tout s'est bien pass√© et qu'une nouvelle ressource a bien √©t√© cr√©√©e</li>
                        <li>204 : indique que tout s'est bien pass√© mais qu'aucun r√©sultat n'est renvoy√©</li>
                        <li>400 : indique qu'une requ√™te est erron√©e</li>
                        <li>401 : indique que l'utilisateur n'est pas authentifi√©, alors que c'est n√©cessaire</li>
                        <li>403 : indique que l'utilisateur n'a pas le droit d'acc√©der √† cette ressource</li>
                        <li>404 : indique que la ressource demand√©e n'existe pas</li>
                        <li>500 : indique que le serveur a subi une erreur interne</li>
                    </ul>
                </p>
            <h4>Les m√©tohdes HTTP</h4>
                <p>
                Les m√©thodes HTTP permettent d'identifier le type de requ√™te que vous souhaitez faire. Voici les principales :
                    <ul>
                        <li><strong>GET</strong> : permet de r√©cup√©rer des ressources, comme par exemple le temps actuel sur un service de m√©t√©o</li>
                        <li><strong>POST</strong> : permet de cr√©er ou modifier une ressource, comme la cr√©ation d'un nouvel utilisateur sur votre application</li>
                        <li><strong>PUT</strong> : permet de modifier une ressource, comme le nom de l'utilisateur que vous venez de cr√©er avec POST</li>
                        <li><strong>DELETE</strong> : Permet de supprimer une ressource, comme un commentaire dans un fil de discussion</li>
                    </ul>
                </p>
            <h4>Les API</h4>
                <p>
                <dl>
                    <dt><strong>API</strong> - Application Programming Interface</dt><dd>Interface mettant √† disposition des points d'acc√®s vers les ressources de l'application</dd>
                </dl>
                </p>
        <hr>
        <div class="under"><h3>R√©cup√©rer des donn√©es d'un service web</h3></div>
            <h4>AJAX</h4>
            
                <p>
                    <dl>
                        <dt><strong>AJAX</strong> - Asynchronous JavaScript And XML</dt><dd>Ensemble d'objets et de fonctions mis √† disposition par le langage JavaScript, afin d'ex√©cuter des requ√™tes HTTP de mani√®re asynchrone</dd>
                    </dl>
                    AJAX va nous permettre d'ex√©cuter des requ√™tes HTTP sans avoir besoin de recharger la page du navigateur. <br>
                    On pourra avoir un site plus r√©actif et am√©liorer l'exp√©rience utilisateur avec du nouveau contenu qui se charge au fur et √† mesure qu'on le d√©couvre, par exemple. <br>
                    var request = new XMLHttpRequest(); <br>
                    request.open("GET", "http://url-service-web.com/api/users"); <br>
                    request.send();<br>
                    Ce code nous permet d'envoyer une requ√™te HTTP de type GET au service web se trouvant √† l'adresse  http://url-service-web.com/api/users .
                </p>
            <h4>R√©cup√©rer les donn√©es au format JSON</h4>
                <p>
                Il faut maintenant r√©cup√©rer et interpr√©ter notre r√©sultat.
                    <dl>
                        <dt><strong>JSON</strong> - JavaScript Object Notation</dt><dd>Format textuel (contrairement √† un format binaire plus l√©ger mais impossible √† lire √† l'≈ìil humain), se rapprochant en termes de syntaxe de celui des objets dans le langage JavaScript</dd>
                    </dl>
                    Il n'est pas n√©cessaire de le <em>parser</em>. C'est-√†-dire que notre application doit le lire et le comprendre afin d'en faire ce qu'on veut, votre navigateur sait directement le lire et le transformer en objets JavaScript.
                </p>
        <hr>
        <div class="under"><h3>Valider les donn√©es saisies utilisateur</h3></div>
            <p>
            Ne faites jamais confiance aux donn√©es saisies par vos utilisateurs ! <br>
            Certains de vos utilisateurs peuvent √™tre malveillants ou ils peuvent ne pas bien comprendre ce que vous souhaitez qu'ils fassent. <br>
            Ainsi, pour v√©rifier qu'une saisie commence par <strong>Hello</strong>, on code : <br>
            myInput.addEventListener('input', function(e) { <br>
                var value = e.target.value; <br>
                if (value.startsWith('Hello ')) { <br>
                    isValid = true; <br>
                } else { <br>
                    isValid = false; <br>
                } <br>
            });
            </p>
            <h4>Regex</h4>
                <p>
                Si l'on veut savoir si notre texte commence par la lettre <em>e</em> et est suivi d'au moins 3 chiffres, on √©crira la regex suivante : <br>
                function isValid(value) { <br>
                    return /^e[0-9]{3,}$/.test(value); <br>
                } <br>
                > <a href="https://regexr.com">Regex</a> <br>
                Il est aussi possible depuis HTML5 d'utiliser les contraintes HTML pour cibler un type de saisie. > <a href="https://developer.mozilla.org/fr/docs/Web/Guide/HTML/HTML5/Constraint_validation">Doc !</a> <br>
                </p>
        <hr>
        <div class="under"><h3>Sauvegardez des donn√©es sur le service web</h3></div>
            <h4>La requ√™te POST</h4>
                <p>
                    var request = new XMLHttpRequest(); <br>
                    request.open("POST", "http://url-service-web.com/api/users"); <br>
                    request.setRequestHeader("Content-Type", "application/json"); <br>
                    request.send(JSON.stringify(value)); <br>
                </p>
        <hr>
        <div class="under"><h3>L'asynchrone en JS</h3></div>
        <p>
            JavaScript est synchrone et mono-thread : lorsqu'on √©crit du code, chaque ligne sera ex√©cut√©e l'une apr√®s l'autre en attendant la fin de l'ex√©cution de la ligne pr√©c√©dente. <br>
            du code asynchrone va s'ex√©cuter ligne apr√®s ligne, mais la ligne suivante n'attendra pas que la ligne asynchrone ait fini son ex√©cution. <br>
        </p>
            <h4>L'event loop</h4>
                <p>
                    <dl>
                        <dt><strong>setTimout</strong></dt><dd>Fonction la plus r√©pandue pour ex√©cuter du code asynchrone sans bloquer le fil d'ex√©cution en cours. <br>
                            Elle prend 2 param√®tres :
                            <ul>
                                <li>La fonction √† ex√©cuter de mani√®re asynchrone (qui sera donc ajout√©e √† la file d'attente de l'event loop)</li>
                                <li>Le d√©lai, en millisecondes, avant d'ex√©cuter cette fonction</li>
                            </ul> </dd>
                    </dl>
                    setTimeout(function() { <br>
                        console.log("I'm here!") <br>
                    }, 5000); <br>                    
                    console.log("Where are you?"); <br>
                    "I'm here!" s'affichera donc 5 sec apr√®s. <br>
                    On peut passer l'identifiant que nous renvoie setTimeout en param√®tre √† la fonction clearTimeout pour annuler l'ex√©cution asynchrone de la fonction avant qu'elle ne soit ex√©cut√©e. <br>
                    On notra quand m√™me 2 fonctions peu utilis√©es :
                        <ul>
                            <li><strong>setInterval</strong> : elle fonctionne exactement comme  setTimeout , √† ceci pr√®s qu'elle ex√©cute la fonction pass√©e en param√®tre en boucle √† une fr√©quence d√©termin√©e par le temps en millisecondes pass√© en second param√®tre. Il suffira de passer la valeur de retour de  setInterval  √†  clearInterval  pour stopper l'ex√©cution en boucle de la fonction</li>
                            <li><strong>setImmediate</strong> : cette fonction prend en seul param√®tre la fonction √† ex√©cuter de fa√ßon synchrone.  La fonction en question sera plac√©e dans la file d'attente de l'event loop, mais va passer devant toutes les autres fonctions, sauf certaines sp√©cifiques au Javascript : les √©v√©nements (les m√™mes qu'on a vus au premier chapitre, et qui sont donc ex√©cut√©s de fa√ßon asynchrone  üòâ), le rendu, et l'I/O. Il existe aussi  nextTick , qui permet, l√†, de court-circuiter tout le monde. √Ä utiliser avec pr√©caution, donc...</li>
                        </ul>
                </p>
            <h4>Le cas de l'I/O</h4>
                <p>
                    <dl>
                        <dt><strong>I/O</strong></dt><dd>correspond aux √©v√©nements li√©s √† l'input(les flux d'entr√©e) et l'output(les flux de sortie). Cela correspond notamment √† la lecture/√©criture des fichiers, aux requ√™tes HTTP, etc</dd>
                        
                    </dl>
                A l'instar de la fonction send(), une fonction asynchrone, et tout ce qui touche √† l'I/O peut √™tre ex√©cut√© de mani√®re asynchrone.
                </p>
            <h4>Callbacks</h4>
                <p>
                La fonction qui est envoy√©e √†  addEventListener  est une callback. Elle n'est pas appel√©e tout de suite, elle est appel√©e plus tard, d√®s que l'utilisateur d√©clanche l'√©l√©ment. √áa ne bloque donc pas l'ex√©cution du code et c'est donc asynchrone. <br>
                Par exemple, lorsque nous d√©finissions une fonction dans la propri√©t√©  onreadystatechange, nous √©tions en train de lui d√©finir une callback. De la m√™me mani√®re, la fonction que nous passons en param√®tre √†  setTimeout  est une callback.
                </p>
            <h4>G√©rer les erreurs</h4>
                <p>
                Pour g√©rer les erreurs avec les callbacks, la m√©thode la plus utilis√©e est de prendre 2 param√®tres dans notre callback. Le 2e param√®tre est notre donn√©e et le 1er est l'erreur. Si elle n'est pas null ou undefined,  elle contiendra un message d'erreur indiquant qu'une erreur est intervenue. <br>
                fs.readFile(filePath, function(err, data) { <br>
                    if (err) { <br>
                        throw err; <br>
                    } <br>
                    // Do something with data <br>
                }); <br>
                </p>
            <h4>Promises</h4>
                <p>
                    <dl>
                        <dt><strong>Promise</strong> - promesse</dt><dd>Lorsque l'on ex√©cute du code asynchrone, celui-ci va imm√©diatement nous retourner une "promesse" qu'un r√©sultat nous sera envoy√© prochainement. <br>
                        Cette promesse est en fait un objet Promise qui peut √™tre  resolve  avec un r√©sultat, ou  reject  avec une erreur. <br>
                        Lorsque l'on r√©cup√®re une  Promise , on peut utiliser sa fonction  then()  pour ex√©cuter du code d√®s que la promesse est r√©solue, et sa fonction  catch()  pour ex√©cuter du code d√®s qu'une erreur est survenue.</dd>
                    </dl>
                    functionThatReturnsAPromise() <br>
                    .then(function(data) { <br>
                        // Do somthing with data <br> 
                    }) <br>
                    .catch(function(err) { <br>
                        // Do something with error <br>
                    }); <br>
                    <strong>Le cha√Ænage</strong> :
                    returnAPromiseWithNumber2() <br>
                    .then(function(data) { // Data is 2 <br>
                        return data + 1; <br>
                    }) <br>
                    .then(function(data) { // Data is 3 <br>
                        throw new Error('error'); <br>
                    }) <br>
                    .then(function(data) { <br>
                        // Not executed  <br>
                    }) <br>
                    .catch(function(err) { <br>
                        return 5; <br>
                    }) <br>
                    .then(function(data) { // Data is 5 <br>
                        // Do something <br>
                    }); <br>
                </p>
            <h4>Async/await</h4>
                <p>
                    async function fonctionAsynchrone1() {/* code asynchrone */} <br>
                    async function fonctionAsynchrone2() {/* code asynchrone */} <br>
                    <br>
                    async function fonctionAsynchrone3() { <br>
                     const value1 = await fonctionAsynchrone1(); <br>
                     const value2 = await fonctionAsynchrone2(); <br>
                     return value1 + value2; <br>
                    } <br>
                    <strong>async / await</strong> utilisant les Promises, la lev√©e d'une erreur se fait aussi par une exception. <br>
                    Pour intercepter cette erreur, par contre, il suffit d'ex√©cuter notre code asynchrone dans un bloc  try {} catch (e) {} , l'erreur √©tant envoy√©e dans le catch.
                </p>
        <hr>
        <div class="under"><h3>Parall√©liser plusieurs requ√™tes HTTP</h3></div>
            <h4>Encha√Æner les requ√™tes</h4>
                <h5> Avec les callbacks</h5>
                    <p>
                        var GETRequestCount = 0; <br>
                        var GETRequestResults = []; <br>
                        function onGETRequestDone(err, result) { <br>
                            if (err) throw err; <br>                        
                            GETRequestCount++; <br>
                            GETRequestResults.push(result); <br>                        
                            if (GETRequestCount == 2) { <br>
                                post(url3, function(err, result) { <br>
                                    if (err) throw err; <br>                                
                                    // We are done here ! <br>
                                }); <br>
                            } <br>
                        } <br>                    
                        get(url1, onGETRequestDone); <br>
                        get(url2, onGETRequestDone); <br>
                    Si on atteint 2 (le nombre de requ√™tes  GET qu'on a faites), alors on va ex√©cuter la requ√™te  POST. <br>
                    GETRequestResults  sert √† conserver les r√©ponses des requ√™tes  GET , car on ne les a pas toutes les 2 en m√™me temps.
                    </p>
                <h5>Avec les Promises</h5>
                    <p>
                        Promise.all([get(url1), get(url2)]) <br>
                        .then(function(results) { <br>
                            return Promise.all([results, post(url3)]]; <br>
                        }) <br>
                        .then(function(allResults) { <br>
                            // We are done here ! <br>
                        }); <br>
                    </p>
                <h5>Avec async/await</h5>
                    <p>
                        async function requests() { <br>
                            var getResults = await Promise.all([get(url1), get(url2)]); <br>
                            var postResult = await post(url3); <br>
                            return [getResults, postResult]; <br>
                        } <br>                        
                        requests().then(function(allResults) { <br>
                            // We are done here ! <br>
                        }); <br>
                    </p>
        <hr>
        <div class="under"><h3>Optimiser son code</h3></div>
            <h4>Linter, minifier, bundler, transpiler</h4>
                <p>
                <dl>
                    <dt><strong>Linter</strong></dt><dd>Le linter est un programme qui va analyser notre code et d√©tecter les erreurs de syntaxe, les variables non utilis√©es, les variables qui n'existent pas, la mauvaise organisation du code, le non-respect des bonnes pratiques d'√©criture de code. <br>
                    Voici quelques exemples de linters : <a href="https://www.jslint.com">JSLint</a>, <a href="https://eslint.org">ESLint</a>.</dd>
                    <dt><strong>Minifier</strong></dt><dd>Le Minifier va essayer de rendre votre code le plus l√©ger possible en retirant les espaces et retours √† la ligne inutiles, en renommant vos variables avec des noms plus courts, en supprimant le code non utilis√©, en supprimant les commentaires, en optimisant certains bouts de code pour les r√©√©crire avec une syntaxe plus l√©g√®re, etc... <br>
                    Voici quelques exemples de minifiers : <a href="https://github.com/srod/node-minify">node-minify</a>, <a href="https://github.com/mishoo/UglifyJS#readme">UglifyJS</a>.</dd>
                    <dt><strong>Bundler</strong></dt><dd>Le Bundler va se charger de packager votre code pour qu'il tienne dans un seul fichier. <br>
                    Voici un exemple de bundler : <a href="https://webpack.js.org">Webpack</a>.</dd>
                    <dt><strong>Transpiler</strong></dt><dd>Le Transpiler permet de coder avec la derni√®re version de JavaScript tout en √©tant compatible avec tous les navigateurs. <br>
                    Voici un exemple de transpiler : <a href="https://babeljs.io">Babel</a>.</dd>
                </dl>
                </p>
        <hr>
        <div class="under"><h3>G√©rer les d√©pendances</h3></div>
            <p>
                <dl>
                    <dt><strong>NPM</strong> - gestionnaire de paquets (package manager)</dt><dd> Programme qui vous permet d'installer tr√®s facilement des modules pour le JavaScript, et cela comprend les outils dont nous avons parl√© dans les chapitres pr√©c√©dents.</dd>
                    <dt><strong>Module</strong></dt><dd>Bout de code qui r√©sout une probl√©matique commune √† beaucoup de d√©veloppeurs : comme un parser XML, un g√©n√©rateur d'uuid (des identifiants uniques), un router, un framework de rendu HTML, etc.</dd>
                </dl>
            > Node.js
            </p>
        <hr>
        <div class="under"><h3>Compiler et ex√©cuter son code</h3></div>
            <p>
            <ol>
                <li>Initialiser avec <strong>npm init</strong></li>
                <li>Installation de Webpack avec <strong>npm install webpack webpack-cli --save-dev</strong></li>
                <li>Projet de base : 
                    <ul>
                        <li>project
                            <ul>
                                <li>- package.json</li>
                                <li>- index.html</li>
                                <ul> 
                                    <li>src
                                        <ul><li>- index.js</li>
                                            <li>- query.js</li>                                    
                                        </ul>
                                    </li>
                            </ul>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>
            
            </p>
</body>
</html>